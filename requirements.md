# 要件定義書

## 1. プロジェクト概要
### 1.1 プロジェクト名
シンプルチケットBot（Discord用お問い合わせツール）

### 1.2 目的
Discordサーバーにおいて、プライベートなお問い合わせを管理するためのシンプルなチケットツールを提供する

### 1.3 背景
- 既存のチケットツールは多機能で複雑なため、使いづらい
- 個人的なお問い合わせや他の人に見られたくない相談を受け付ける仕組みが必要
- Discordのスレッド機能を活用してシンプルに実装したい

## 2. スコープ
### 2.1 対象範囲
- 特定のアクション（ボタンクリック、コマンド実行など）によるチケット作成
- 問い合わせ者とサポートロール保持者のみが参加できるプライベートスレッドの自動作成
- 基本的なチケット管理機能（作成、クローズ）

### 2.2 対象外範囲
- 高度なチケット管理機能（優先度設定、カテゴリ分類、統計機能など）
- Webダッシュボード
- 他のプラットフォームとの連携

## 3. ステークホルダー
### 3.1 プロジェクトオーナー
Discordサーバー管理者

### 3.2 エンドユーザー
- 問い合わせを行うDiscordサーバーメンバー
- サポートを提供するスタッフ（特定ロール保持者）

### 3.3 開発チーム
Bot開発者

## 4. 機能要件
### 4.1 必須機能
1. **チケット作成機能**
   - ボタンクリックまたはコマンドでチケット作成
   - 自動的にプライベートスレッドを作成
   - スレッドには問い合わせ者とサポートロール保持者のみ参加可能

2. **スレッド管理**
   - スレッド名は自動生成（例：ticket-ユーザー名-日時）
   - 初回メッセージで使い方を案内

3. **チケットクローズ機能**
   - コマンドまたはボタンでチケットをクローズ
   - スレッドをアーカイブ

### 4.2 追加機能
- チケット作成時の通知機能
- 簡単なログ保存機能
- チケット番号の自動採番

## 5. 非機能要件
### 5.1 パフォーマンス
- チケット作成は3秒以内に完了
- 同時に複数のチケット作成に対応

### 5.2 セキュリティ
- プライベートスレッドの権限管理を適切に実施
- Botトークンの安全な管理

### 5.3 可用性
- 24時間365日稼働を目標
- エラー発生時の適切なエラーメッセージ表示

### 5.4 保守性
- シンプルなコード構造
- 環境変数による設定管理
- ログ出力による問題の追跡

## 6. システム構成
### 6.1 アーキテクチャ
- Discord.js（またはDiscord.py）を使用したBot構成
- シングルサーバーでの動作

### 6.2 技術スタック
- 言語：Node.js（JavaScript/TypeScript）またはPython
- ライブラリ：Discord.js v14またはDiscord.py v2
- データ保存：ローカルファイルまたは軽量DB（SQLite）

### 6.3 インフラストラクチャ
- ホスティング：VPS、Heroku、Railway、またはローカルサーバー
- 必要リソース：最小限のCPU/メモリ

## 7. 制約事項
### 7.1 技術的制約
- Discord APIのレート制限に準拠
- スレッド数の上限（Discordの仕様に依存）

### 7.2 ビジネス上の制約
- 無料または低コストでの運用
- シンプルさを最優先

### 7.3 リソース制約
- 個人開発のため開発リソースは限定的

## 8. スケジュール
### 8.1 マイルストーン
1. 環境構築・基本設定（1日）
2. チケット作成機能の実装（2日）
3. クローズ機能の実装（1日）
4. テスト・デバッグ（2日）
5. デプロイ（1日）

### 8.2 納期
1週間程度での完成を目標

## 9. リスク
### 9.1 技術的リスク
- Discord APIの仕様変更
- レート制限への抵触

### 9.2 ビジネスリスク
- ユーザーの誤操作によるスレッドの誤作成

### 9.3 リスク対策
- Discord.jsの公式ドキュメントを参照
- 適切なクールダウンの実装
- 確認メッセージの表示

## 10. 成果物
### 10.1 納品物一覧
- Botのソースコード
- 設定ファイルのテンプレート
- 簡易セットアップガイド

### 10.2 ドキュメント
- READMEファイル（インストール・設定方法）
- 使用方法の説明

## 11. 受入条件
### 11.1 受入基準
- 指定されたアクションでプライベートスレッドが作成されること
- 問い合わせ者とサポートロールのみがスレッドに参加できること
- チケットのクローズが正常に動作すること

### 11.2 検収方法
- テストサーバーでの動作確認
- 複数ユーザーでの同時テスト